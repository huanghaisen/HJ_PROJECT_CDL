

<!-- 用户编辑模态框 -->
    <form class="form-horizontal" style="height:480px;overflow:scroll;overflow-x:hidden" method="post" name="form_part" id="form_part" action="${request.contextPath}/soa/parts/datas/save">
      <input type="hidden" id="id" name="id" value="${devicePart.id!}">
      <input type="hidden" id="status" name="status" value="${devicePart.status!}">
      <input type="hidden" class="form-control" id="hiddenPartTypeId" name="partTypeId" value="${devicePart.partTypeId!}" >
      <div class="modal-body">
      
               <div class="form-group">
                <label for="partTypeSelect">配件类型：</label>
                 <select id="partTypeSelect"  class="form-control" name="partTypeSel" style="width:100%" >
                   <option> <option>
                 </select>
               </div>
               
               <div class="form-group">
                <div>               
                  <label for="exampleNickname1">配件名称：</label>
                  <input type="text" class="form-control" id="devicePartName" name="devicePartName" value="${devicePart.devicePartName!}">
                </div>
                </div>
                
               <div class="form-group">
                <div>
                  <label for="exampleInputPassword1">单价(元)：</label>
                  <input type="text" class="form-control" id="partPrice" name="partPrice" value="${devicePart.partPrice!}">
                </div>
               </div>
                
                <div class="form-group">
                <div>
                  <label for="exampleInputEmail1">单位：</label>
                  <input type="text" class="form-control" id="partUnit" name="partUnit" value="${devicePart.partUnit!}">
                </div>
                </div>
                
                <div class="form-group">
                <div>
                  <label for="examplePhone1">重量：</label>
                  <input type="text" class="form-control" id="partWeight" name="partWeight" value="${devicePart.partWeight!}">
                </div>
                </div>

                <div class="form-group">
                <div>               
                  <label for="exampleNickname1">长度：</label>
                  <input type="text" class="form-control" id="partLength" name="partLength" value="${devicePart.partLength!}">
                </div>
                </div>
                
                <div class="form-group">
                <div>
                  <label for="exampleInputPassword1">宽度：</label>
                  <input type="text" class="form-control" id="partWidth" name="partWidth" value="${devicePart.partWidth!}">
                </div>
                </div>
                
                <div class="form-group">
                <div>
                  <label for="exampleInputEmail1">高度：</label>
                  <input type="text" class="form-control" id="partHeight" name="partHeight" value="${devicePart.partHeight!}">
                </div>
                </div>
                
                <div class="form-group">
                <div>
                  <label for="examplePhone1">体积：</label>
                  <input type="text" class="form-control" id="partVolume" name="partVolume" value="${devicePart.partVolume!}">
                </div>
                </div>
                
     
      </div>
     </form>	
         
     <script>
    $(function(){	
     var Url=contextPath+"/soa/parts/datas/partTypeBox";
     var Target="#partTypeSelect";
     Select2(Url,Target);

     function Select2(comboxUrl,SelectTarget){
     	$.ajax({
        	url:comboxUrl,    
        	type:"post",
        	dataType:"json",
        	async:false,
        	success: function(result){  		
        		//combxListData=result;
        		//alert(fs);
        		for(var i = 0;i<result.length;i++){    	
        			var $option = $('<option/>').attr('value',result[i].id).html(result[i].partTypeName);
        			$option.appendTo($(SelectTarget));
        		}

        		$(SelectTarget).select2({
        			placeholder: "请选择",
        			allowClear: false
        		}).change(function(){
        			var hiddenPartTypeId=$("#hiddenPartTypeId");
        			var zhi=$("#partTypeSelect").val();
        			hiddenPartTypeId.attr("value",zhi);
        			//alert(hiddenPartTypeId.val());
        		});
        		    		
        	} 
          });
     }
       
 	var partTypeIdVal=$("#hiddenPartTypeId").val();
 	if(partTypeIdVal!=null&&partTypeIdVal!=""){
 		$("#partTypeSelect").val(partTypeIdVal).trigger("change");
 	}


$('#form_part').bootstrapValidator({
    message: 'This value is not valid',
    container: 'tooltip',
    feedbackIcons: {
        valid: 'glyphicon glyphicon-ok',
        invalid: 'glyphicon glyphicon-remove',
        validating: 'glyphicon glyphicon-refresh'
    },
    fields: {
    	partTypeSel: {
            validators: {
                notEmpty: {
                    message: '请选择类型'
                }
            }
        },
        devicePartName: {
        	container: 'popover',
            message: 'The nickName is not valid',
            validators: {
                notEmpty: {
                    message: '机构名称不能为空！'
                }
            }
        },
        partPrice: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }, 
        partUnit: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                }
            }
        }, 
        partWeight: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }, 
        partLength: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }, 
        partWidth: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }, 
        partHeight: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }, 
        partVolume: {
        	container: 'popover',
            validators: {
                notEmpty: {
                    message: '不能为空！'
                },
                regexp: {
                    regexp: /^\d{1,8}$/,
                    message: '请输入8位数以内的正整数！'
                }
            }
        }

    }
}).on('success.form.bv', function(e) {
	
	ajaxSubmit($('#form_part')[0], function(data){
			if(data.status==0){
				var d = dialog({
					content : data.msg
				});
					d.show();
					setTimeout(function() {
					d.close().remove();
					that.close().remove();
				}, 2000); 
					
					table.ajax.reload(null,false);//刷新表格
			}else{
				var d = dialog({
					content : data.msg
				});
					d.show();
					setTimeout(function() {
					d.close().remove();
					that.close().remove();
				}, 2000);
			} 
		});
	
    }); 

 }); 
</script>